#!/usr/bin/env ruby

require 'rubygems'
require 'bundler'

Bundler.setup

$LOAD_PATH.unshift(File.expand_path(File.join(File.dirname(__FILE__), '..', 'lib')))
require 'drydock'

opts = {
  cache: Drydock::Caches::FilesystemCache.new,
  event_handler: proc { |event|
    puts event
  }
}

Drydock.build(opts) do |project|
  filename = ARGV[0] || 'Drydockfile'
  contents = File.read(filename)
  [contents, filename]
end
